# 트랜잭션 (Transaction)

## 트랜잭션이란?
트랜잭션(Transaction)은 데이터베이스 관리 시스템(DBMS)에서 데이터의 일관성을 유지하면서 데이터를 안전하게 처리하기 위한 기본 단위입니다. 

트랜잭션은 하나 이상의 연산(operation)을 포함할 수 있으며, 이 연산들은 전체적으로 하나의 단위로 처리됩니다. 

## ACID

### 원자성(Atomicity)
트랜잭션 내의 모든 연산은 하나의 단위로 간주됩니다. 

이는 모든 연산이 성공적으로 완료되거나, 하나라도 실패할 경우 전체 트랜잭션이 취소(롤백)되어야 함을 의미합니다.

### 일관성(Consistency)
트랜잭션이 실행되기 전과 후의 데이터베이스 상태는 일관된 상태를 유지해야 합니다. 

즉, 트랜잭션이 데이터베이스의 유효한 상태에서 다른 유효한 상태로만 변환해야 합니다.

### 독립성(Isolation)
동시에 실행되는 여러 트랜잭션들은 서로 영향을 주지 않아야 합니다. 

한 트랜잭션의 중간 상태는 다른 트랜잭션에게 보이지 않아야 합니다.

### 지속성(Durability)
트랜잭션이 성공적으로 완료되면, 그 결과는 영구적으로 데이터베이스에 반영되어야 합니다. 

시스템에 문제가 발생해도 이 결과는 유지되어야 합니다.

## 트랜잭션 작동 방식
1. **시작(Start of Transaction)**: 트랜잭션이 시작됩니다.

2. **실행(Execution)**: 데이터베이스에 대한 하나 이상의 읽기 또는 쓰기 연산이 수행됩니다.

3. **커밋(Commit)**: 모든 연산이 성공적으로 완료되었을 때, 트랜잭션을 커밋하여 변경사항을 데이터베이스에 영구적으로 반영합니다.

4. **롤백(Rollback)**: 연산 중 하나라도 실패하면 트랜잭션은 롤백되어 시작 전의 상태로 돌아갑니다.

## **트랜잭션 제어 언어 (TCL)**
TCL은 데이터베이스 트랜잭션을 관리합니다.

### COMMIT
트랜잭션을 완료하고 변경사항을 데이터베이스에 영구적으로 저장합니다.
    
```sql
COMMIT;
```
    
### ROLLBACK
트랜잭션을 취소하고 마지막 COMMIT 이후의 변경사항을 되돌립니다.
    
```sql
ROLLBACK;
```
    
### SAVEPOINT
트랜잭션 내에서 롤백할 지점을 지정합니다.
    
```sql
SAVEPOINT savepoint1;
```
    
